{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://2048/./js/util.js","webpack://2048/./js/timer.js","webpack://2048/./js/const.js","webpack://2048/./js/board.js"],"sourcesContent":["const equalArrays = (a, b) => {\r\n  if (a.length != b.length) return false;\r\n  for (let i = 0; i < a.length; i++)\r\n    if (a[i] !== b[i]) return false;\r\n  return true;\r\n}\r\n\r\nconst showAlert = (message) => {\r\n  const alertContainer = document.createElement('div');\r\n  alertContainer.style.zIndex = 100;\r\n  alertContainer.style.position = 'absolute';\r\n  alertContainer.style.left = 0;\r\n  alertContainer.style.top = 0;\r\n  alertContainer.style.right = 0;\r\n  alertContainer.style.padding = '10px 3px';\r\n  alertContainer.style.fontSize = '30px';\r\n  alertContainer.style.textAlign = 'center';\r\n  alertContainer.style.backgroundColor = 'red';\r\n\r\n  alertContainer.textContent = message;\r\n\r\n  document.body.append(alertContainer);\r\n\r\n  setTimeout(() => {\r\n    alertContainer.remove();\r\n  }, 3000);\r\n}\r\n\r\nconst generateNum = () => {\r\n  let number = Math.random();\r\n  if (number >= 0.9) {\r\n    return 4;\r\n  } else {\r\n    return 2;\r\n  }\r\n}\r\n\r\nexport {equalArrays, showAlert, generateNum}\r\n","const base = 60;\r\nlet readout = '';\r\nlet clocktimer, dateObj, diffHour, diffMinute, diffSecond;\r\nlet hour = 1,\r\n  minute = 1,\r\n  fullMinute = 1,\r\n  second = 0,\r\n  fullSecond = 0,\r\n  milliSecond = 0,\r\n  init = 0;\r\n\r\n\r\nconst ClearСlock = () => {\r\n  clearTimeout(clocktimer);\r\n  hour = 1;\r\n  minute = 1;\r\n  fullMinute = 1;\r\n  second = 0;\r\n  fullSecond = 0;\r\n  milliSecond = 0;\r\n  init = 0;\r\n  readout = '00:00:00.00';\r\n  document.userData.stopwatch.value = readout;\r\n}\r\n\r\nconst StartTIME = () => {\r\n  let cdateObj = new Date();\r\n  let time = (cdateObj.getTime() - dateObj.getTime()) - (second * 1000);\r\n  if (time > 999) {\r\n    second++;\r\n  }\r\n  if (second >= (minute * base)) {\r\n    fullSecond = 0;\r\n    minute++;\r\n  } else {\r\n    fullSecond = parseInt((milliSecond / 100) + second);\r\n    if (fullSecond >= base) {\r\n      fullSecond = fullSecond - ((minute - 1) * base);\r\n    }\r\n  }\r\n  if (minute > (hour * base)) {\r\n    fullMinute = 1;\r\n    hour++;\r\n  } else {\r\n    fullMinute = parseInt((milliSecond / 100) + minute);\r\n    if (fullMinute >= base) {\r\n      fullMinute = fullMinute - ((hour - 1) * base);\r\n    }\r\n  }\r\n  milliSecond = Math.round(time / 10);\r\n  if (milliSecond > 99) {\r\n    milliSecond = 0;\r\n  }\r\n  if (milliSecond == 0) {\r\n    milliSecond = '00';\r\n  }\r\n  if (milliSecond > 0 && milliSecond <= 9) {\r\n    milliSecond = '0' + milliSecond;\r\n  }\r\n  if (fullSecond > 0) {\r\n    diffSecond = fullSecond;\r\n    if (fullSecond < 10) {\r\n      diffSecond = '0' + fullSecond;\r\n    }\r\n  } else {\r\n    diffSecond = '00';\r\n  }\r\n  diffMinute = fullMinute - 1;\r\n  if (diffMinute > 0) {\r\n    if (diffMinute < 10) {\r\n      diffMinute = '0' + diffMinute;\r\n    }\r\n  } else {\r\n    diffMinute = '00';\r\n  }\r\n  diffHour = hour - 1;\r\n  if (diffHour > 0) {\r\n    if (diffHour < 10) {\r\n      diffHour = '0' + diffHour;\r\n    }\r\n  } else {\r\n    diffHour = '00';\r\n  }\r\n  readout = diffHour + ':' + diffMinute + ':' + diffSecond + '.' + milliSecond;\r\n  document.userData.stopwatch.value = readout;\r\n  clocktimer = setTimeout(() => StartTIME(), 1);\r\n}\r\n\r\nconst StartStop = () => {\r\n  if (init == 0) {\r\n    ClearСlock();\r\n    dateObj = new Date();\r\n    StartTIME();\r\n    init = 1;\r\n  } else {\r\n    clearTimeout(clocktimer);\r\n    init = 0;\r\n  }\r\n}\r\n\r\nconst Start = () => {\r\n  ClearСlock();\r\n  dateObj = new Date();\r\n  StartTIME();\r\n  init = 1;\r\n}\r\n\r\nexport {StartStop, Start}","const MoveType = {\r\n    RIGHT: 'Right',\r\n    LEFT: 'Left',\r\n    DOWN: 'Down',\r\n    UP: 'Up',\r\n};\r\n\r\nexport {MoveType}","import { equalArrays, showAlert, generateNum } from './util.js';\r\nimport { StartStop, Start } from './timer.js';\r\nimport { MoveType } from './const.js';\r\n\r\nconst startGameBtn = document.querySelector('#start-game');\r\nconst playerName = document.querySelector('#player-name');\r\nconst gridDisplay = document.querySelector('.grid');\r\nconst scoreDispaly = document.querySelector('.score');\r\nconst resultDisplay = document.querySelector('.status');\r\nconst resultTemp = document.querySelector('#results-template');\r\nconst resultsList = document.querySelector('.results');\r\nconst width = 5;\r\n\r\nlet squares = [];\r\nlet score;\r\nlet isChange;\r\nlet endMouseX;\r\nlet endMouseY;\r\nlet mouseX;\r\nlet mouseY;\r\nlet startX;\r\nlet startY;\r\n\r\nconst startGame = () => {\r\n  if (playerName.checkValidity()) {\r\n    document.userData.stopwatch.value = '00:00:00.00';\r\n    score = 0;\r\n    scoreDispaly.innerHTML = 0;\r\n    createBoard();\r\n    Start();\r\n    startGameBtn.textContent = `Начать заново`;\r\n  } else {\r\n    showAlert('Введите имя!');\r\n  }\r\n}\r\n\r\nconst addListeners = () => {\r\n  gridDisplay.addEventListener('mousedown', mouseDown);\r\n  document.addEventListener('keydown', keyControl);\r\n  gridDisplay.addEventListener('touchstart', startTouchControl);\r\n  gridDisplay.addEventListener('touchend', endTouchControl);\r\n  gridDisplay.addEventListener('mouseup', mouseUp);\r\n}\r\n\r\nconst removeListeners = () => {\r\n  gridDisplay.removeEventListener('mousedown', mouseDown);\r\n  document.removeEventListener('keydown', keyControl);\r\n  gridDisplay.removeEventListener('touchstart', startTouchControl);\r\n  gridDisplay.removeEventListener('touchend', endTouchControl);\r\n  gridDisplay.removeEventListener('mouseup', mouseUp);\r\n}\r\n\r\nconst createBoard = () => {\r\n  resultDisplay.innerHTML = null;\r\n  gridDisplay.innerHTML = null;\r\n  gridDisplay.style = 'opacity: 1';\r\n  squares.splice(0, width * width);\r\n  for (let i = 0; i < width * width; i++) {\r\n    const square = document.createElement('div');\r\n    square.innerHTML = 0;\r\n    gridDisplay.appendChild(square);\r\n    squares.push(square);\r\n  }\r\n  generate();\r\n  generate();\r\n  addListeners();\r\n}\r\n\r\nconst draw = () => {\r\n  for (let i = 0; i < width * width; i++) {\r\n    squares[i].removeAttribute('class');\r\n    if (squares[i].textContent !== \"0\") {\r\n      if (squares[i].textContent === \"2\" || squares[i].textContent === \"4\") {\r\n        squares[i].classList.add(\"x2-4\");\r\n      } else {\r\n        squares[i].classList.add(\"x8-2048\");\r\n      }\r\n      squares[i].classList.add(\"x\" + squares[i].textContent);\r\n    }\r\n  }\r\n};\r\n\r\nconst generate = () => {\r\n  const randomSquare = Math.floor(Math.random() * squares.length);\r\n  if (squares[randomSquare].innerHTML == 0) {\r\n    squares[randomSquare].innerHTML = generateNum();\r\n  } else {\r\n    generate();\r\n  }\r\n  draw();\r\n}\r\n\r\nconst moveRow = (moveType) => {\r\n  for (let i = 0; i < 25; i++) {\r\n    if (i % 5 === 0) {\r\n      const row = [\r\n        parseInt(squares[i].innerHTML),\r\n        parseInt(squares[i + 1].innerHTML),\r\n        parseInt(squares[i + 2].innerHTML),\r\n        parseInt(squares[i + 3].innerHTML),\r\n        parseInt(squares[i + 4].innerHTML)\r\n      ];\r\n      const filteredRow = row.filter(num => num);\r\n      const missing = 5 - filteredRow.length;\r\n      const zeros = Array(missing).fill(0);\r\n      let newRow;\r\n\r\n      switch (moveType) {\r\n        case 'Right':\r\n          newRow = zeros.concat(filteredRow);\r\n          break;\r\n        case 'Left':\r\n          newRow = filteredRow.concat(zeros);\r\n          break;\r\n        default:\r\n          break;\r\n      };\r\n\r\n      if (!(equalArrays(row, newRow))) {\r\n        isChange = true;\r\n        squares[i].innerHTML = newRow[0];\r\n        squares[i + 1].innerHTML = newRow[1];\r\n        squares[i + 2].innerHTML = newRow[2];\r\n        squares[i + 3].innerHTML = newRow[3];\r\n        squares[i + 4].innerHTML = newRow[4];\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nconst moveColumn = (moveType) => {\r\n  for (let i = 0; i < 5; i++) {\r\n    const column = [\r\n      parseInt(squares[i].innerHTML),\r\n      parseInt(squares[i + width].innerHTML),\r\n      parseInt(squares[i + (width * 2)].innerHTML),\r\n      parseInt(squares[i + (width * 3)].innerHTML),\r\n      parseInt(squares[i + (width * 4)].innerHTML)\r\n    ];\r\n    const filteredColumn = column.filter(num => num);\r\n    const missing = 5 - filteredColumn.length;\r\n    const zeros = Array(missing).fill(0);\r\n    let newColumn;\r\n\r\n    switch (moveType) {\r\n      case 'Down':\r\n        newColumn = zeros.concat(filteredColumn);\r\n        break;\r\n      case 'Up':\r\n        newColumn = filteredColumn.concat(zeros);\r\n        break;\r\n      default:\r\n        break;\r\n    };\r\n\r\n    if (!(equalArrays(column, newColumn))) {\r\n      isChange = true;\r\n      squares[i].innerHTML = newColumn[0];\r\n      squares[i + width].innerHTML = newColumn[1];\r\n      squares[i + (width * 2)].innerHTML = newColumn[2];\r\n      squares[i + (width * 3)].innerHTML = newColumn[3];\r\n      squares[i + (width * 4)].innerHTML = newColumn[4];\r\n    }\r\n  }\r\n}\r\n\r\nconst combineRowLeft = () => {\r\n  for (let i = 0; i < 24; i++) {\r\n    if (\r\n      squares[i].innerHTML === squares[i + 1].innerHTML \r\n      && squares[i].innerHTML != 0 \r\n      && squares[i + 1].innerHTML != 0\r\n      ) {\r\n      const combinedTotal = parseInt(squares[i].innerHTML) + parseInt(squares[i + 1].innerHTML);\r\n      squares[i].innerHTML = combinedTotal;\r\n      squares[i + 1].innerHTML = 0;\r\n      score += combinedTotal;\r\n      scoreDispaly.innerHTML = score;\r\n      isChange = true;\r\n    }\r\n  }\r\n  checkForWin()\r\n}\r\n\r\nconst combineRowRight = () => {\r\n  for (let i = 24; i > 0; i--) {\r\n    if (\r\n      squares[i].innerHTML === squares[i - 1].innerHTML \r\n      && squares[i].innerHTML != 0 \r\n      && squares[i - 1].innerHTML != 0\r\n      ) {\r\n      const combinedTotal = parseInt(squares[i].innerHTML) + parseInt(squares[i - 1].innerHTML);\r\n      squares[i].innerHTML = combinedTotal;\r\n      squares[i - 1].innerHTML = 0;\r\n      score += combinedTotal;\r\n      scoreDispaly.innerHTML = score;\r\n      isChange = true;\r\n    }\r\n  }\r\n  checkForWin();\r\n}\r\n\r\nconst combineColumnUp = () => {\r\n  for (let i = 0; i < 20; i++) {\r\n    if (\r\n      squares[i].innerHTML === squares[i + width].innerHTML \r\n      && squares[i].innerHTML != 0 \r\n      && squares[i + width].innerHTML != 0\r\n      ) {\r\n      const combinedTotal = parseInt(squares[i].innerHTML) + parseInt(squares[i + width].innerHTML);\r\n      squares[i].innerHTML = combinedTotal;\r\n      squares[i + width].innerHTML = 0;\r\n      score += combinedTotal;\r\n      scoreDispaly.innerHTML = score;\r\n      isChange = true;\r\n    }\r\n  }\r\n  checkForWin();\r\n}\r\n\r\nconst combineColumnDown = () => {\r\n  for (let i = 24; i > 4; i--) {\r\n    if (\r\n      squares[i].innerHTML === squares[i - width].innerHTML \r\n      && squares[i].innerHTML != 0 \r\n      && squares[i - width].innerHTML != 0\r\n      ) {\r\n      const combinedTotal = parseInt(squares[i].innerHTML) + parseInt(squares[i - width].innerHTML);\r\n      squares[i].innerHTML = combinedTotal;\r\n      squares[i - width].innerHTML = 0;\r\n      score += combinedTotal;\r\n      scoreDispaly.innerHTML = score;\r\n      isChange = true;\r\n    }\r\n  }\r\n  checkForWin();\r\n}\r\n\r\nconst keyControl = (evt) => {\r\n  if (evt.keyCode === 39) {\r\n    evt.preventDefault();\r\n    keyRight();\r\n  } else if (evt.keyCode === 37) {\r\n    evt.preventDefault();\r\n    keyLeft();\r\n  } else if (evt.keyCode === 38) {\r\n    evt.preventDefault();\r\n    keyUp();\r\n  } else if (evt.keyCode === 40) {\r\n    evt.preventDefault();\r\n    keyDown();\r\n  }\r\n}\r\n\r\nconst addResult = () => {\r\n  const tempContent = resultTemp.content;\r\n  const newResult = tempContent.cloneNode(true);\r\n  const player = newResult.querySelector('.player');\r\n  const time = newResult.querySelector('.time');\r\n  player.textContent = playerName.value;\r\n  time.textContent = document.userData.stopwatch.value;\r\n  resultsList.appendChild(newResult);\r\n}\r\n\r\nconst checkForWin = () => {\r\n  for (let i = 0; i < squares.length; i++) {\r\n    if (squares[i].innerHTML == 2048) {\r\n      StartStop();\r\n      addResult();\r\n      resultDisplay.innerHTML = 'Ты выиграл!';\r\n      gridDisplay.style = 'opacity: 0.5'\r\n      removeListeners();\r\n    }\r\n  }\r\n}\r\n\r\nconst checkForGameOver = () => {\r\n  let zeros = 0;\r\n  for (let i = 0; i < squares.length; i++) {\r\n    if (squares[i].innerHTML == 0) {\r\n      zeros++;\r\n    }\r\n  }\r\n\r\n  for (let i = 0; i < (squares.length - 1); i++) {\r\n    if (squares[i].innerHTML === squares[i + 1].innerHTML) {\r\n      zeros++;\r\n    }\r\n  }\r\n\r\n  for (let i = 0; i < 20; i++) {\r\n    if (squares[i].innerHTML === squares[i + width].innerHTML) {\r\n      zeros++;\r\n    }\r\n  }\r\n  if (zeros === 0) {\r\n    StartStop();\r\n    resultDisplay.innerHTML = 'Ты проиграл!';\r\n    gridDisplay.style = 'opacity: 0.5';\r\n    removeListeners();\r\n  }\r\n}\r\n\r\nconst keyRight = () => {\r\n  isChange = false;\r\n  moveRow(MoveType.RIGHT)\r\n  combineRowRight();\r\n  if (isChange) {\r\n    generate();\r\n  }\r\n  moveRow(MoveType.RIGHT)\r\n  draw();\r\n  checkForGameOver();\r\n}\r\n\r\nconst keyLeft = () => {\r\n  isChange = false;\r\n  moveRow(MoveType.LEFT)\r\n  combineRowLeft();\r\n  if (isChange) {\r\n    generate();\r\n  }\r\n  moveRow(MoveType.LEFT)\r\n  draw();\r\n  checkForGameOver();\r\n}\r\n\r\nconst keyDown = () => {\r\n  isChange = false;\r\n  moveColumn(MoveType.DOWN)\r\n  combineColumnDown();\r\n  if (isChange) {\r\n    generate();\r\n  }\r\n  moveColumn(MoveType.DOWN)\r\n  draw();\r\n  checkForGameOver();\r\n}\r\n\r\nconst keyUp = () => {\r\n  isChange = false;\r\n  moveColumn(MoveType.UP)\r\n  combineColumnUp();\r\n  if (isChange) {\r\n    generate();\r\n  }\r\n  moveColumn(MoveType.UP)\r\n  draw();\r\n  checkForGameOver();\r\n}\r\n\r\nconst mouseDown = (evt) => {\r\n  mouseX = evt.pageX;\r\n  mouseY = evt.pageY;\r\n  if (evt.which == 1) {\r\n    addMouseMove();\r\n  }\r\n}\r\n\r\nconst addMouseMove = () => {\r\n  gridDisplay.addEventListener('mousemove', evt => {\r\n    evt.preventDefault();\r\n    endMouseX = evt.pageX;\r\n    endMouseY = evt.pageY;\r\n  });\r\n}\r\n\r\nconst removeMouseMove = () => {\r\n  endMouseX = 0;\r\n  endMouseY = 0;\r\n  gridDisplay.removeEventListener('mousemove', evt => {\r\n    evt.preventDefault();\r\n    endMouseX = evt.pageX;\r\n    endMouseY = evt.pageY;\r\n  });\r\n}\r\n\r\nconst mouseUp = (evt) => {\r\n  if (evt.which == 1) {\r\n    evt.preventDefault();\r\n    const diffX = endMouseX - mouseX;\r\n    const diffY = endMouseY - mouseY;\r\n    const absX = Math.abs(diffX) > Math.abs(diffY);\r\n    const absY = Math.abs(diffY) > Math.abs(diffX);\r\n    if (diffX > 0 && absX) {\r\n      keyRight();\r\n    }\r\n    else if (diffX < 0 && absX) {\r\n      keyLeft();\r\n    }\r\n    else if (diffY > 0 && absY) {\r\n      keyDown();\r\n    }\r\n    else if (diffY < 0 && absY) {\r\n      keyUp();\r\n    }\r\n    removeMouseMove();\r\n  }\r\n}\r\n\r\nconst startTouchControl = (evt) => {\r\n  if (evt.cancelable) {\r\n    evt.preventDefault();\r\n    startX = evt.touches[0].pageX;\r\n    startY = evt.touches[0].pageY;\r\n  }\r\n}\r\n\r\nconst endTouchControl = (evt) => {\r\n  if (evt.cancelable) {\r\n    evt.preventDefault();\r\n    const endX = evt.changedTouches[0].pageX;\r\n    const endY = evt.changedTouches[0].pageY;\r\n    const diffX = endX - startX;\r\n    const diffY = endY - startY;\r\n    const absX = Math.abs(diffX) > Math.abs(diffY);\r\n    const absY = Math.abs(diffY) > Math.abs(diffX);\r\n    if (diffX > 0 && absX) {\r\n      keyRight();\r\n    }\r\n    else if (diffX < 0 && absX) {\r\n      keyLeft();\r\n    }\r\n    else if (diffY > 0 && absY) {\r\n      keyDown();\r\n    }\r\n    else if (diffY < 0 && absY) {\r\n      keyUp();\r\n    }\r\n  }\r\n}\r\n\r\nstartGameBtn.addEventListener('click', startGame);"],"names":["equalArrays","a","b","length","i","base","clocktimer","dateObj","diffHour","diffMinute","diffSecond","readout","hour","minute","fullMinute","second","fullSecond","milliSecond","init","clearTimeout","document","userData","stopwatch","value","StartTIME","time","Date","getTime","parseInt","Math","round","setTimeout","StartStop","MoveType","startGameBtn","querySelector","playerName","gridDisplay","scoreDispaly","resultDisplay","resultTemp","resultsList","score","isChange","endMouseX","endMouseY","mouseX","mouseY","startX","startY","squares","removeListeners","removeEventListener","mouseDown","keyControl","startTouchControl","endTouchControl","mouseUp","draw","width","removeAttribute","textContent","classList","add","generate","randomSquare","floor","random","innerHTML","moveRow","moveType","row","filteredRow","filter","num","missing","zeros","Array","fill","newRow","concat","moveColumn","column","filteredColumn","newColumn","evt","keyCode","preventDefault","keyRight","keyLeft","keyUp","keyDown","addResult","newResult","content","cloneNode","player","appendChild","checkForWin","style","checkForGameOver","combinedTotal","combineRowRight","combineRowLeft","combineColumnDown","combineColumnUp","pageX","pageY","which","addMouseMove","addEventListener","diffX","diffY","absX","abs","absY","cancelable","touches","endX","changedTouches","endY","checkValidity","splice","square","createElement","push","createBoard","message","alertContainer","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","body","append","remove","showAlert"],"sourceRoot":""}